<nav style="margin-top: 120px;">
    <ol class="breadcrumb mt-3">
        <li class="li breadcrumb-item"><a routerLink="/">Home</a></li>
        <li class="li breadcrumb-item active">Lojas</li>
    </ol>
</nav>

<app-form1 cardHeaderClasses="bg-primary text-white" [headerText]="'Cadastrar nova loja'" iconClass="fa fa-store">
    <form class="row">
        <div class="form-group col-md-6">
            <label for="nome">Nome da Loja*:</label>
            <input type="text" class="form-control" id="nome" #inputNomeCidade="ngModel" [(ngModel)]="cnpj.nome"
                name="nome" required>
            <div *ngIf="(inputNomeCidade.invalid && inputNomeCidade.touched)">
                <div class="text-danger error-message" *ngIf="inputNomeCidade?.errors?.['required']">Este campo é
                    obrigatório.</div>
            </div>
        </div>
        
        <div class="form-group col-md-6">
            <label for="estado">Estado:</label>
            <p-dropdown [options]="listaEstados" [(ngModel)]="cnpj.estado" optionLabel="name" name="estado"></p-dropdown>
        </div>

  
        <div class="form-group col-md-6">
            <label for="cidade">Cidade:</label>
            <p-autoComplete [(ngModel)]="cnpj.cidade" [suggestions]="filteredCidades" (completeMethod)="searchCidade($event)"
            name="cidade" field="name"  [emptyMessage]="'Nenhuma opção encontrada'" [showEmptyMessage]="true" [disabled]="!cnpj.estado"></p-autoComplete>  
        </div>

        <div class="form-group col-md-6 formCadastroLoja">
            <label for="cnpj">CNPJ:</label>
            <p-inputMask id="cnpj" class="form-control" mask="99.999.999/9999-99" [(ngModel)]="cnpj.cnpj"
                name="cnpj" placeholder="99.999.999/9999-99"></p-inputMask>
        </div>
        <div class="form-group col-md-12 mt-0">
            <p-button label="Salvar/Editar" class="mr-2" styleClass="p-button-rounded">
                <i class="fas fa-save mr-2" style="color:white"></i>
            </p-button>
            <p-button label="Resetar" styleClass="p-button-rounded">
                <i class="fas fa-undo mr-2" style="color:white"></i>
            </p-button>
        </div>
    </form>
</app-form1>


<div class="ui-g-12 mt-4">
    <h1 class="mt-2 mb-4">Gerenciamento de Lojas</h1>
</div>

<!-- TABELA -->
<div class="card mt-4">
    <p-progressBar mode="indeterminate" *ngIf="barraDeProgressoLista==true" [style]="{'height': '6px'}"></p-progressBar>
    <p-table [value]="listaLojas" [paginator]="true" [rows]="5" [showCurrentPageReport]="true" sortField="id"
        [sortOrder]="1" [tableStyle]="{ 'min-width': '50rem' }"
        currentPageReportTemplate="Mostrando {first} de {last} até {totalRecords} registros"
        [rowsPerPageOptions]="[10, 25, 50]">
        <ng-template pTemplate="header">
            <tr style="font-size: 15px;">
                <th style="width: 5%; text-align: center;">ID</th>
                <th style="width: 25%; text-align: left;">Nome</th>
                <th style="width: 20%; text-align: left;">Cidade</th>
                <th style="width: 20%; text-align: left;">Estado</th>
                <th style="width: 20%; text-align: left;">CNPJ</th>
                <th style="width: 10%; text-align: center;">Ações</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-loja>
            <tr style="font-size: 15px;">
                <td style="text-align: center;">{{loja.id}}</td>
                <td style="text-align: left;">{{loja.nome}}</td>
                <td style="text-align: left;">{{loja.cidade}}</td>
                <td style="text-align: left;">{{loja.estado}}</td>
                <td style="text-align: left;">{{loja.cnpj}}</td>
                <td style="text-align: center;">
                    <div class="container-acao">
                        <button type="button" class="btn btn-sm btn-primary mr-3">
                            <i class="fa fa-edit"></i>
                        </button>
                        <button type="button" class="btn btn-sm btn-danger">
                            <i class="fa fa-trash"></i>
                        </button>
                    </div>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="footer">
        </ng-template>
    </p-table>
</div>
<!-- TABELA -->